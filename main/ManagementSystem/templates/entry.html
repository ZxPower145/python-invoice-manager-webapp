{% load static %}
{% load crispy_forms_tags %}
{% include 'navbar.html' %}

<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="{% static 'css/entry.css' %} ">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <meta charset="UTF-8">
    <title>{{ title }}</title>
</head>

{% if messages %}
    {% for message in messages %}
        <div class="popup" id="popup">
            <img src=" {% static 'img/save.png' %}"/>
            <h2 id="h2">Thank You!</h2>
            <p id="p">Invoice saved successfully!</p>
            <button id="button" type="button" onclick="closePopUp()">Ok</button>
        </div>
    {% endfor %}
{% endif %}

<body style="background: #34404d">
    <h3 class="h3" style="color: white">Here you can add new invoices</h3>
    <p style="color: white">The windows are scrollable</p>
    <div class="row">
        <div class="col">
            <div class="myForm" style="background: #34b4eb">
                <form method="POST" action=''>{% csrf_token %}
                    <div class="row text-center">
                        <div class="col-sm-9">
        <!-- Invoice number(unique), date, customer name, phone number -->
                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    {{ form.invoice_number|as_crispy_field }}
                                    {{ form.invoice_date|as_crispy_field }}
                                </div>
                                <div class="form-group col-md-6">
                                    <div class="form-row">
                                        <input type="text" name="name" placeholder="Customer Name"
                                               class="text-center form-control textinput" id="id_name" required>
                                    </div>
                                    <div class="form-row mt-3">
                                        <input type="text" name="phone_number" placeholder="Phone Number"
                                               class="text-center form-control textinput" id="id_phone_number">
                                    </div>
                                </div>
                            </div>
                            <br><br>
                            <div class="scroll">
            <!--Item One --------------------------------------------------------------------------->
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <input type="text" name="item_one" placeholder="Item One"
                                               class="text-center form-control textinput" id="id_item_one" required>
                                    </div>
                                    <div class="form-group col-md-3">
                                         <input type="number" name="item_one_quantity" placeholder="Quantity"
                                               class="text-center form-control textinput" id="id_item_one_quantity" required>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <input type="number" name="item_one_unit_price" placeholder="Unit Price" step="0.01"
                                               class="text-center form-control textinput" id="id_item_one_unit_price" required>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="input-group flex-nowrap mb-3">
                                        <div style="width: 100%; margin-left: 5px">
                                            <input type="number" name="item_one_total_price" placeholder="Item"
                                               class="text-center form-control textinput" id="id_item_one_total_price" readonly>
                                        </div>
                                        <div class="input-group-append">
                                            <span class="input-group-text bg-success" style="height: 38px; margin-left: 10px;
                                            margin-right: 0px">€</span>
                                        </div>
                                    </div>
                                </div>
                                <br><br>
            <!--Item Two --------------------------------------------------------------------------->
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <input type="text" name="item_two" placeholder="Item Two"
                                               class="text-center form-control textinput" id="id_item_two">
                                    </div>
                                    <div class="form-group col-md-3">
                                         <input type="number" name="item_two_quantity" placeholder="Quantity"
                                               class="text-center form-control textinput" id="id_item_two_quantity">
                                    </div>
                                    <div class="form-group col-md-3">
                                        <input type="number" name="item_two_unit_price" placeholder="Unit Price" step="0.01"
                                               class="text-center form-control textinput" id="id_item_two_unit_price">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="input-group flex-nowrap mb-3">
                                        <div style="width: 100%; margin-left: 5px">
                                            <input type="number" name="item_two_total_price" placeholder="Item"
                                               class="text-center form-control textinput" id="id_item_two_total_price" readonly>
                                        </div>
                                        <div class="input-group-append">
                                            <span class="input-group-text bg-success" style="height: 38px; margin-left: 10px;
                                            margin-right: 0px">€</span>
                                        </div>
                                    </div>
                                </div>
                                <br><br>
            <!--Item Three ------------------------------------------------------------------------->
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <input type="text" name="item_three" placeholder="Item Three"
                                               class="text-center form-control textinput" id="id_item_three">
                                    </div>
                                    <div class="form-group col-md-3">
                                         <input type="number" name="item_three_quantity" placeholder="Quantity"
                                               class="text-center form-control textinput" id="id_item_three_quantity">
                                    </div>
                                    <div class="form-group col-md-3">
                                        <input type="number" name="item_three_unit_price" placeholder="Unit Price" step="0.01"
                                               class="text-center form-control textinput" id="id_item_three_unit_price">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="input-group flex-nowrap mb-3">
                                        <div style="width: 100%; margin-left: 5px">
                                            <input type="number" name="item_three_total_price" placeholder="Item"
                                               class="text-center form-control textinput" id="id_item_three_total_price" readonly>
                                        </div>
                                        <div class="input-group-append">
                                            <span class="input-group-text bg-success" style="height: 38px; margin-left: 10px;
                                            margin-right: 0px">€</span>
                                        </div>
                                    </div>
                                </div>
                                <br><br>
            <!--Item Four ------------------------------------------------------------------------->
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <input type="text" name="item_four" placeholder="Item Four"
                                               class="text-center form-control textinput" id="id_item_four">
                                    </div>
                                    <div class="form-group col-md-3">
                                         <input type="number" name="item_four_quantity" placeholder="Quantity"
                                               class="text-center form-control textinput" id="id_item_four_quantity">
                                    </div>
                                    <div class="form-group col-md-3">
                                        <input type="number" name="item_four_unit_price" placeholder="Unit Price" step="0.01"
                                               class="text-center form-control textinput" id="id_item_four_unit_price">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="input-group flex-nowrap mb-3">
                                        <div style="width: 100%; margin-left: 5px">
                                            <input type="number" name="item_four_total_price" placeholder="Item"
                                               class="text-center form-control textinput" id="id_item_four_total_price" readonly>
                                        </div>
                                        <div class="input-group-append">
                                            <span class="input-group-text bg-success" style="height: 38px; margin-left: 10px;
                                            margin-right: 0px">€</span>
                                        </div>
                                    </div>
                                </div>
                                <br><br>
            <!--Item Five ------------------------------------------------------------------------->
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <input type="text" name="item_five" placeholder="Item Five"
                                               class="text-center form-control textinput" id="id_item_five">
                                    </div>
                                    <div class="form-group col-md-3">
                                         <input type="number" name="item_five_quantity" placeholder="Quantity"
                                               class="text-center form-control textinput" id="id_item_five_quantity">
                                    </div>
                                    <div class="form-group col-md-3">
                                        <input type="number" name="item_five_unit_price" placeholder="Unit Price" step="0.01"
                                               class="text-center form-control textinput" id="id_item_five_unit_price">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="input-group flex-nowrap mb-3">
                                        <div style="width: 100%; margin-left: 5px">
                                            <input type="number" name="item_five_total_price" placeholder="Item"
                                               class="text-center form-control textinput" id="id_item_five_total_price" readonly>
                                        </div>
                                        <div class="input-group-append">
                                            <span class="input-group-text bg-success" style="height: 38px; margin-left: 10px;
                                            margin-right: 0px">€</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br><br>
        <!--Total ------------------------------------------------------------------------------>
                            <div class="form-row mb-2">
                                <div class="input-group flex-nowrap mb-3">
                                    <div style="width: 100%; margin-left: 5px">
                                        {{ form.total|as_crispy_field|safe }}
                                    </div>
                                    <div class="input-group-append">
                                        <span class="input-group-text bg-success" style="height: 38px; margin-left: 10px;
                                        margin-right: 0px">€</span>
                                    </div>
                                </div>
                            </div>
        <!-- Invoice_type ---------------------------------------------------------------------->
                            <div class="form-row">
                                <div class="form-group col-md-11">
                                    <select class="col form-select" name="invoice_type" id="id_invoice_type">
                                        {% for option in form.INVOICE_TYPE %}
                                        <option value="{{option.1}}" selected name="INVOICE_TYPE">{{option.1}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
        <!-- Paid (T / F) ---------------------------------------------------------------------->
                                 <div class="form-group col-md-1">
                                    <input type="checkbox" class="btn-check" id="id_paid" name="paid"
                                           autocomplete="off"/>
                                    <label class="btn btn-outline-success" for="id_paid">Paid</label><br>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-outline-secondary btn-sm btn-block">Save</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="col">
            <div class="recent" style="background: #34b4eb">
                <div class="recent-invoices">
                    <span>Recent Invoices: </span>
                    <span>{{total_invoices}}</span>
                </div>
                <br>
                {% for instance in query %}
                    <div class="border-contents">
                        <div class="instance-number-name">{{instance.invoice_number}}. {{instance.name}}</div>
                        <div class="instance-invoice-date">{{instance.invoice_date}}</div>
                    </div>
                    <div class="instance-total">{{instance.total}} <spam class="euro">€</spam></div>
                {% endfor %}
            </div>
        </div>
    </div>
    <script src="../static/js/calculator.js"></script>
    <script>
        let popup = document.getElementById('popup');
        let popupBng = document.getElementById('popup-bng');
        let button = document.getElementById('button');
        let h2 = document.getElementById("h2");
        let p = document.getElementById("p");
        function closePopUp(){
            popup.classList.add("remove")
            popupBng.classList.add("remove")
            button.classList.add("remove")
            h2.classList.add("remove")
            p.classList.add("remove")
        }
    </script>
</body>
</html>
